[gd_scene load_steps=13 format=3 uid="uid://bmmj4lxj88iwg"]

[ext_resource type="Script" uid="uid://c4fdc82p08sxj" path="res://scenes/mini_game.gd" id="1_0gcsj"]
[ext_resource type="PackedScene" uid="uid://cwxf3ipevjip" path="res://scenes/gem.tscn" id="2_3kuml"]
[ext_resource type="Texture2D" uid="uid://byjuqfhd2c54v" path="res://assets/combat/ui/staff.png" id="3_3kuml"]
[ext_resource type="PackedScene" uid="uid://bwbix4ltm861q" path="res://scenes/critter.tscn" id="3_v2cs6"]
[ext_resource type="Texture2D" uid="uid://ni1gr827ywb3" path="res://assets/critterGame/goal.png" id="4_burph"]
[ext_resource type="AudioStream" uid="uid://brgif2tqnucmq" path="res://assets/audio/sfx/GWJ84_SFX_GemSuccess_VerA-001.mp3" id="6_svrvl"]
[ext_resource type="AudioStream" uid="uid://bgjqcb5gcfs5b" path="res://assets/audio/sfx/GWJ84_SFX_GemSuccess_VerA-002.mp3" id="7_2sn1h"]
[ext_resource type="AudioStream" uid="uid://dvvsdwi6ehqce" path="res://assets/audio/sfx/GWJ84_SFX_GemSuccess_VerB-001.mp3" id="8_eps0w"]
[ext_resource type="AudioStream" uid="uid://buu5kklbdoiow" path="res://assets/audio/sfx/GWJ84_SFX_GemSuccess_VerB-002.mp3" id="9_4ovyi"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_3kuml"]
friction = 0.43
bounce = 0.46

[sub_resource type="CircleShape2D" id="CircleShape2D_rvs2r"]
radius = 29.0172

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_o1hth"]
streams_count = 4
stream_0/stream = ExtResource("6_svrvl")
stream_1/stream = ExtResource("7_2sn1h")
stream_2/stream = ExtResource("8_eps0w")
stream_3/stream = ExtResource("9_4ovyi")

[node name="MiniGame" type="Node2D"]
script = ExtResource("1_0gcsj")
gemScene = ExtResource("2_3kuml")
maxSpawnedGems = 5

[node name="Arena" type="Node2D" parent="."]

[node name="ArenaEdge" type="StaticBody2D" parent="Arena"]
physics_material_override = SubResource("PhysicsMaterial_3kuml")

[node name="Sprite2D" type="Sprite2D" parent="Arena/ArenaEdge"]
texture = ExtResource("3_3kuml")
centered = false

[node name="ArenaPolygon" type="CollisionPolygon2D" parent="Arena/ArenaEdge"]
unique_name_in_owner = true
position = Vector2(0, 143)
build_mode = 1
polygon = PackedVector2Array(495, 106, 438, 101, 379, 104, 337, 103, 292, 111, 258, 117, 224, 130, 188, 144, 153, 168, 129, 186, 109, 217, 101, 246, 100, 270, 108, 301, 116, 334, 149, 365, 192, 389, 240, 405, 291, 417, 342, 418, 382, 419, 431, 417, 476, 418, 517, 412, 550, 401, 604, 380, 645, 356, 666, 328, 684, 298, 690, 257, 683, 220, 666, 188, 636, 168, 590, 141, 545, 127)

[node name="ArenaCenterArea" type="Area2D" parent="Arena"]

[node name="ArenaCenterPolygon" type="CollisionPolygon2D" parent="Arena/ArenaCenterArea"]
unique_name_in_owner = true
position = Vector2(13, 144)
build_mode = 1
polygon = PackedVector2Array(376, 138, 437, 142, 504, 154, 558, 173, 599, 203, 623, 246, 620, 300, 586, 342, 537, 363, 470, 381, 399, 384, 331, 382, 259, 372, 197, 348, 155, 321, 134, 286, 133, 252, 149, 213, 180, 189, 225, 163, 275, 150, 327, 141)

[node name="ArenaCenter" type="Marker2D" parent="Arena"]
unique_name_in_owner = true
position = Vector2(405, 394)

[node name="Critter" parent="." instance=ExtResource("3_v2cs6")]
position = Vector2(381, 420)

[node name="SpawnedGems" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="Goal" type="Area2D" parent="."]
unique_name_in_owner = true
position = Vector2(534, 268)

[node name="CPUParticles2D" type="CPUParticles2D" parent="Goal"]
amount = 32
texture = ExtResource("4_burph")
randomness = 1.0
emission_shape = 2
emission_sphere_radius = 30.0
gravity = Vector2(0, 0)
orbit_velocity_min = 1.0
orbit_velocity_max = 1.5
scale_amount_min = 0.04
scale_amount_max = 0.1
hue_variation_min = 0.64
hue_variation_max = 0.64

[node name="Sprite2D" type="Sprite2D" parent="Goal"]
texture = ExtResource("4_burph")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Goal"]
shape = SubResource("CircleShape2D_rvs2r")

[node name="SuccessAudio" type="AudioStreamPlayer2D" parent="Goal"]
unique_name_in_owner = true
stream = SubResource("AudioStreamRandomizer_o1hth")
max_polyphony = 6
bus = &"Minigame"

[connection signal="body_entered" from="Goal" to="." method="_on_goal_body_entered"]
